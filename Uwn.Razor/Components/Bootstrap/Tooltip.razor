@namespace Uwn.Razor.Components.Bootstrap
@using Uwn.Razor.Models.ViewModels.Bootstrap
@inherits UwnComponentBase<TooltipViewModel>

@if (ViewModel.IsVisible)
{
	<abbr id="@ViewModel.Id" class="@ViewModel.AdditionalClassNames" data-bs-toggle="tooltip" data-bs-placement="@ViewModel.Placement.ToBootstrapName()" data-bs-title="@ViewModel.Content" data-bs-html="@ViewModel.ContentIsHtml.ToString().ToLower()">
		@ViewModel.ChildContent
	</abbr>
}

@code {
	[Parameter] public RenderFragment? ChildContent { get; set; }
	[Parameter] public Placement Placement { get; set; } = Placement.Bottom;
	[Parameter] public string Content { get; set; } = string.Empty;
	[Parameter] public bool ContentIsHtml { get; set; } = false;

	protected override async Task OnInitializedAsync()
	{
		await base.OnInitializedAsync();
		UsesTooltips = true;
	}

	protected override TooltipViewModel BuildViewModelFromParameters()
		=> new()
		{
			ChildContent = ChildContent,
			Content = Content,
			ContentIsHtml = ContentIsHtml,
			Placement = Placement
		};
}